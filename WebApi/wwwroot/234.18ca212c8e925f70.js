"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[234],{9234:(B,c,a)=>{a.r(c),a.d(c,{BasketModule:()=>y});var r=a(6814),i=a(2999),l=a(8180),t=a(4769),d=a(823),p=a(5142),m=a(8639),h=a(9384);function b(s,g){if(1&s){const e=t.EpF();t.TgZ(0,"div",3)(1,"app-basket-summary",4),t.NdJ("productCountChanged",function(n){t.CHM(e);const u=t.oxw();return t.KtG(u.updateProductCount(n))}),t.qZA(),t.TgZ(2,"div",5),t._UZ(3,"app-order-summary",6),t.TgZ(4,"a",7),t._uU(5,"Complete to Checkout"),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("showControls",!0)("basketDetails",e.basketDetails),t.xp6(2),t.Q6J("subtotal",e.subtotal)}}function k(s,g){1&s&&(t.TgZ(0,"div",8)(1,"h1",9),t._uU(2,"Your basket is empty"),t.qZA(),t.TgZ(3,"button",10),t._uU(4,"Go to our shop"),t.qZA()())}const v=[{path:"",component:(()=>{class s{constructor(e,o){this.basketService=e,this.productsService=o,this.subtotal=0}ngOnInit(){this.loadProductDetails()}loadProductDetails(){this.basketService.getBasketDetails().pipe((0,l.q)(1)).subscribe(e=>{this.basketDetails=e,this.subtotal=e.basketProducts.reduce((o,n)=>o+n.price*n.quantity,0),console.log(e.basketProducts)})}updateProductCount(e){this.basketService.updateProductBasket(e),e.quantity<1&&this.loadProductDetails(),this.subtotal=this.basketDetails?.basketProducts.reduce((o,n)=>o+n.price*n.quantity,0)||0}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(d.v),t.Y36(p.d))};static#s=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-basket"]],decls:4,vars:2,consts:[[1,"container","py-5"],["class","py-5",4,"ngIf","ngIfElse"],["empty",""],[1,"py-5"],[3,"showControls","basketDetails","productCountChanged"],[1,"float-end","mt-3","pb-3","w"],[3,"subtotal"],["routerLink","/checkout","role","button",1,"btn","btn-outline-primary","d-block","py-2","mx-3"],[1,"container"],[1,"container","text-center","mt-5","text-primary"],["routerLink","/shop",1,"btn","btn-primary","d-block","m-auto","mt-4","fs-5"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,b,6,3,"div",1),t.YNc(2,k,5,0,"ng-template",null,2,t.W1O),t.qZA()),2&o){const u=t.MAs(3);t.xp6(1),t.Q6J("ngIf",null==n.basketDetails||null==n.basketDetails.basketProducts?null:n.basketDetails.basketProducts.length)("ngIfElse",u)}},dependencies:[r.O5,i.rH,m.h,h.b]})}return s})(),data:{breadcrumb:"basket"}}];let C=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#s=this.\u0275mod=t.oAB({type:s});static#e=this.\u0275inj=t.cJS({imports:[i.Bz.forChild(v),i.Bz]})}return s})();var f=a(6208);let y=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#s=this.\u0275mod=t.oAB({type:s});static#e=this.\u0275inj=t.cJS({imports:[r.ez,C,f.m]})}return s})()}}]);